<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>浙江大学食堂菜品可视化</title>
    <style>
        :root {
            --primary-color: #c00a27;
            --secondary-color: #003366;
            --background-color: #f5f5f5;
            --card-color: #ffffff;
            --text-color: #333333;
            --border-color: #dddddd;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Microsoft YaHei', Arial, sans-serif;
        }
        
        body {
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        header {
            background-color: var(--primary-color);
            color: white;
            padding: 15px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
        }
        
        .logo img {
            height: 40px;
            margin-right: 10px;
        }
        
        .logo h1 {
            font-size: 1.5rem;
        }
        
        nav ul {
            display: flex;
            list-style: none;
        }
        
        nav ul li {
            margin-left: 20px;
        }
        
        nav ul li a {
            color: white;
            text-decoration: none;
            padding: 5px 10px;
            border-radius: 3px;
            transition: background-color 0.3s;
        }
        
        nav ul li a:hover {
            background-color: rgba(255,255,255,0.2);
        }
        
        .page {
            display: none;
            padding: 20px 0;
        }
        
        .page.active {
            display: block;
        }
        
        .card {
            background-color: var(--card-color);
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .btn {
            display: inline-block;
            background-color: var(--primary-color);
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            text-decoration: none;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: #a00820;
        }
        
        .btn-secondary {
            background-color: var(--secondary-color);
        }
        
        .btn-secondary:hover {
            background-color: #002244;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 1rem;
        }
        
        .canteen-grid, .dish-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .canteen-card, .dish-card {
            background-color: var(--card-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        
        .canteen-card:hover, .dish-card:hover {
            transform: translateY(-5px);
        }
        
        .canteen-card img, .dish-card img {
            width: 100%;
            height: 200px;
            object-fit: cover;
        }
        
        .canteen-card-content, .dish-card-content {
            padding: 15px;
        }
        
        .canteen-card h3, .dish-card h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .dish-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary-color);
            margin: 10px 0;
        }
        
        .dish-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
        }
        
        .rating {
            color: #ffc107;
            margin: 10px 0;
        }
        
        .comments {
            margin-top: 20px;
        }
        
        .comment {
            border-bottom: 1px solid var(--border-color);
            padding: 10px 0;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .comment-user {
            font-weight: bold;
        }
        
        .comment-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .comment-rating {
            color: #ffc107;
        }
        
        .cart-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid var(--border-color);
        }
        
        .cart-total {
            text-align: right;
            font-size: 1.2rem;
            font-weight: bold;
            margin-top: 20px;
        }
        
        .admin-controls {
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 15px;
        }
        
        .hidden {
            display: none;
        }
        
        .language-selector {
            position: absolute;
            top: 15px;
            right: 20px;
        }
        
        footer {
            background-color: var(--secondary-color);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
    </style>
</head>
<body>
    <header>
        <div class="container header-content">
            <div class="logo">
                <h1>浙江大学食堂菜品可视化</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#" onclick="showPage('home')">首页</a></li>
                    <li><a href="#" onclick="showPage('canteens')">食堂</a></li>
                    <li><a href="#" onclick="showPage('cart')">购物车</a></li>
                    <li><a href="#" onclick="showPage('profile')">个人中心</a></li>
                    <li><a href="#" onclick="logout()">退出</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <div class="language-selector">
        <select id="language-select" onchange="changeLanguage(this.value)">
            <option value="zh-CN">简体中文</option>
            <option value="en">English</option>
        </select>
    </div>

    <div class="container">
        <!-- 登录页面 -->
        <div id="login-page" class="page active">
            <div class="card">
                <h2>欢迎来到浙江大学食堂菜品可视化系统</h2>
                <div style="text-align: center; margin: 30px 0;">
                    <button class="btn" onclick="showPage('user-login')">用户登录</button>
                    <button class="btn btn-secondary" onclick="showPage('admin-login')">管理员登录</button>
                </div>
            </div>
        </div>

        <!-- 用户登录页面 -->
        <div id="user-login-page" class="page">
            <div class="card">
                <h2>用户登录</h2>
                <form id="user-login-form">
                    <div class="form-group">
                        <label for="user-id">用户编号</label>
                        <input type="text" id="user-id" required>
                    </div>
                    <div class="form-group">
                        <label for="user-password">密码</label>
                        <input type="password" id="user-password" required>
                    </div>
                    <button type="submit" class="btn">登录</button>
                </form>
                <p style="margin-top: 15px;">还没有账号？<a href="#" onclick="showPage('user-register')">立即注册</a></p>
            </div>
        </div>

        <!-- 用户注册页面 -->
        <div id="user-register-page" class="page">
            <div class="card">
                <h2>用户注册</h2>
                <form id="user-register-form">
                    <div class="form-group">
                        <label for="nickname">昵称</label>
                        <input type="text" id="nickname" required>
                    </div>
                    <div class="form-group">
                        <label for="register-password">密码</label>
                        <input type="password" id="register-password" required>
                    </div>
                    <div class="form-group">
                        <label for="confirm-password">确认密码</label>
                        <input type="password" id="confirm-password" required>
                    </div>
                    <button type="submit" class="btn">注册</button>
                </form>
            </div>
        </div>

        <!-- 注册成功页面 -->
        <div id="register-success-page" class="page">
            <div class="card">
                <h2>注册成功</h2>
                <p>您的用户编号是：<span id="user-number" style="font-weight: bold; font-size: 1.2rem;"></span></p>
                <p>请牢记您的编号，这是您登录系统的凭证。</p>
                <button class="btn" onclick="showPage('user-login')">返回登录</button>
            </div>
        </div>

        <!-- 管理员登录页面 -->
        <div id="admin-login-page" class="page">
            <div class="card">
                <h2>管理员登录</h2>
                <form id="admin-login-form">
                    <div class="form-group">
                        <label for="admin-id">管理员编号</label>
                        <input type="text" id="admin-id" value="00000000" readonly>
                    </div>
                    <div class="form-group">
                        <label for="admin-password">密码</label>
                        <input type="password" id="admin-password" required>
                    </div>
                    <button type="submit" class="btn">登录</button>
                </form>
            </div>
        </div>

        <!-- 首页 -->
        <div id="home-page" class="page">
            <div class="card">
                <h2>欢迎来到浙江大学食堂菜品可视化系统</h2>
                <p>在这里，您可以浏览各食堂的菜品信息，查看其他用户的评价，收藏喜欢的菜品，并添加到购物车计算价格。</p>
                <div style="text-align: center; margin: 20px 0;">
                    <button class="btn" onclick="showPage('canteens')">浏览食堂</button>
                </div>
            </div>
        </div>

        <!-- 食堂列表页面 -->
        <div id="canteens-page" class="page">
            <div class="card">
                <h2>食堂列表</h2>
                <div id="canteen-grid" class="canteen-grid">
                    <!-- 食堂卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>

        <!-- 菜品列表页面 -->
        <div id="dishes-page" class="page">
            <div class="card">
                <h2 id="canteen-name">食堂菜品</h2>
                <div id="dish-grid" class="dish-grid">
                    <!-- 菜品卡片将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>

        <!-- 菜品详情页面 -->
        <div id="dish-detail-page" class="page">
            <div class="card">
                <div id="dish-detail-content">
                    <!-- 菜品详情将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>

        <!-- 购物车页面 -->
        <div id="cart-page" class="page">
            <div class="card">
                <h2>购物车</h2>
                <div id="cart-items">
                    <!-- 购物车内容将通过JavaScript动态生成 -->
                </div>
                <div class="cart-total">
                    总计: ￥<span id="cart-total-price">0.00</span>
                </div>
                <p style="margin-top: 20px; color: #666; font-style: italic;">注：购物车功能仅用于价格计算，不支持实际支付。</p>
            </div>
        </div>

        <!-- 个人中心页面 -->
        <div id="profile-page" class="page">
            <div class="card">
                <h2>个人中心</h2>
                <div class="form-group">
                    <label for="profile-nickname">昵称</label>
                    <input type="text" id="profile-nickname">
                </div>
                <button class="btn" onclick="updateProfile()">更新昵称</button>
                
                <h3 style="margin-top: 30px;">修改密码</h3>
                <div class="form-group">
                    <label for="old-password">原密码</label>
                    <input type="password" id="old-password">
                </div>
                <div class="form-group">
                    <label for="new-password">新密码</label>
                    <input type="password" id="new-password">
                </div>
                <div class="form-group">
                    <label for="confirm-new-password">确认新密码</label>
                    <input type="password" id="confirm-new-password">
                </div>
                <button class="btn" onclick="changePassword()">修改密码</button>
                
                <h3 style="margin-top: 30px;">我的收藏</h3>
                <div id="favorite-dishes">
                    <!-- 收藏的菜品将通过JavaScript动态生成 -->
                </div>
            </div>
        </div>

        <!-- 管理员功能页面 -->
        <div id="admin-page" class="page">
            <div class="card">
                <h2>管理员控制台</h2>
                <div class="admin-controls">
                    <button class="btn" onclick="showPage('admin-canteen-management')">食堂管理</button>
                    <button class="btn" onclick="showPage('admin-dish-management')">菜品管理</button>
                    <button class="btn" onclick="showPage('admin-user-management')">用户管理</button>
                    <button class="btn" onclick="showPage('admin-comment-management')">评论管理</button>
                </div>
            </div>
        </div>

        <!-- 其他管理员功能页面将通过JavaScript动态生成 -->
    </div>

    <footer>
        <div class="container">
            <p>浙江大学食堂菜品可视化系统 &copy; 2023</p>
        </div>
    </footer>

    <script>
        // 全局变量
        let currentUser = null;
        let currentLanguage = 'zh-CN';
        let cart = [];
        let favorites = [];
        
        // 示例数据 - 在实际应用中，这些数据应从后端API获取
        const canteens = [
            {
                id: 1,
                name: '紫金港校区大食堂',
                description: '位于紫金港校区中心，提供各类中式快餐、面食、小吃等',
                image: 'https://via.placeholder.com/300x200?text=紫金港大食堂',
                rating: 4.2
            },
            {
                id: 2,
                name: '玉泉校区第一食堂',
                description: '玉泉校区历史最悠久的食堂，以杭帮菜和家常菜为主',
                image: 'https://via.placeholder.com/300x200?text=玉泉第一食堂',
                rating: 4.0
            },
            {
                id: 3,
                name: '西溪校区美食广场',
                description: '汇集各地风味小吃，环境优雅，适合聚餐',
                image: 'https://via.placeholder.com/300x200?text=西溪美食广场',
                rating: 4.5
            },
            {
                id: 4,
                name: '华家池校区食堂',
                description: '以健康营养为特色，提供多种养生菜品',
                image: 'https://via.placeholder.com/300x200?text=华家池食堂',
                rating: 3.9
            }
        ];
        
        const dishes = [
            {
                id: 1,
                canteenId: 1,
                name: '东坡肉',
                description: '传统杭帮菜，肉质酥烂，肥而不腻',
                price: 18.0,
                image: 'https://via.placeholder.com/300x200?text=东坡肉',
                favorites: 0
            },
            {
                id: 2,
                canteenId: 1,
                name: '西湖醋鱼',
                description: '杭州名菜，鱼肉鲜嫩，酸甜适口',
                price: 25.0,
                image: 'https://via.placeholder.com/300x200?text=西湖醋鱼',
                favorites: 0
            },
            {
                id: 3,
                canteenId: 2,
                name: '龙井虾仁',
                description: '茶叶入菜，虾仁鲜嫩，茶香四溢',
                price: 32.0,
                image: 'https://via.placeholder.com/300x200?text=龙井虾仁',
                favorites: 0
            },
            {
                id: 4,
                canteenId: 2,
                name: '叫花鸡',
                description: '传统名菜，鸡肉酥烂，香气扑鼻',
                price: 38.0,
                image: 'https://via.placeholder.com/300x200?text=叫花鸡',
                favorites: 0
            },
            {
                id: 5,
                canteenId: 3,
                name: '片儿川',
                description: '杭州特色面食，雪菜笋片肉片，鲜美可口',
                price: 15.0,
                image: 'https://via.placeholder.com/300x200?text=片儿川',
                favorites: 0
            },
            {
                id: 6,
                canteenId: 3,
                name: '小笼包',
                description: '皮薄馅多，汤汁丰富，鲜美可口',
                price: 12.0,
                image: 'https://via.placeholder.com/300x200?text=小笼包',
                favorites: 0
            },
            {
                id: 7,
                canteenId: 4,
                name: '养生鸡汤',
                description: '选用优质土鸡，配以多种药材，滋补养生',
                price: 20.0,
                image: 'https://via.placeholder.com/300x200?text=养生鸡汤',
                favorites: 0
            },
            {
                id: 8,
                canteenId: 4,
                name: '清炒时蔬',
                description: '时令蔬菜，清淡爽口，健康营养',
                price: 8.0,
                image: 'https://via.placeholder.com/300x200?text=清炒时蔬',
                favorites: 0
            }
        ];
        
        // 页面显示控制函数
        function showPage(pageId) {
            // 隐藏所有页面
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // 显示指定页面
            document.getElementById(pageId + '-page').classList.add('active');
            
            // 根据页面ID执行特定操作
            switch(pageId) {
                case 'canteens':
                    renderCanteens();
                    break;
                case 'dishes':
                    // 这个页面需要在调用时传递食堂ID
                    break;
                case 'cart':
                    renderCart();
                    break;
                case 'profile':
                    renderProfile();
                    break;
                case 'home':
                    // 首页不需要特殊处理
                    break;
            }
        }
        
        // 渲染食堂列表
        function renderCanteens() {
            const canteenGrid = document.getElementById('canteen-grid');
            canteenGrid.innerHTML = '';
            
            canteens.forEach(canteen => {
                const canteenCard = document.createElement('div');
                canteenCard.className = 'canteen-card';
                canteenCard.innerHTML = `
                    <img src="${canteen.image}" alt="${canteen.name}">
                    <div class="canteen-card-content">
                        <h3>${canteen.name}</h3>
                        <p>${canteen.description}</p>
                        <div class="rating">评分: ${canteen.rating} ★</div>
                        <button class="btn" onclick="showDishes(${canteen.id})">查看菜品</button>
                    </div>
                `;
                canteenGrid.appendChild(canteenCard);
            });
        }
        
        // 显示指定食堂的菜品
        function showDishes(canteenId) {
            const canteen = canteens.find(c => c.id === canteenId);
            document.getElementById('canteen-name').textContent = canteen.name + ' - 菜品列表';
            
            const dishGrid = document.getElementById('dish-grid');
            dishGrid.innerHTML = '';
            
            const canteenDishes = dishes.filter(dish => dish.canteenId === canteenId);
            
            canteenDishes.forEach(dish => {
                const dishCard = document.createElement('div');
                dishCard.className = 'dish-card';
                dishCard.innerHTML = `
                    <img src="${dish.image}" alt="${dish.name}">
                    <div class="dish-card-content">
                        <h3>${dish.name}</h3>
                        <p>${dish.description}</p>
                        <div class="dish-price">￥${dish.price.toFixed(2)}</div>
                        <div class="dish-actions">
                            <button class="btn" onclick="showDishDetail(${dish.id})">查看详情</button>
                            <button class="btn btn-secondary" onclick="addToCart(${dish.id})">加入购物车</button>
                        </div>
                    </div>
                `;
                dishGrid.appendChild(dishCard);
            });
            
            showPage('dishes');
        }
        
        // 显示菜品详情
        function showDishDetail(dishId) {
            const dish = dishes.find(d => d.id === dishId);
            const dishDetailContent = document.getElementById('dish-detail-content');
            
            dishDetailContent.innerHTML = `
                <h2>${dish.name}</h2>
                <img src="${dish.image}" alt="${dish.name}" style="width: 100%; max-height: 400px; object-fit: cover; margin: 15px 0;">
                <p>${dish.description}</p>
                <div class="dish-price">价格: ￥${dish.price.toFixed(2)}</div>
                <div>收藏数: ${dish.favorites}</div>
                <div class="dish-actions" style="margin: 20px 0;">
                    <button class="btn" onclick="addToCart(${dish.id})">加入购物车</button>
                    <button class="btn btn-secondary" onclick="toggleFavorite(${dish.id})">${favorites.includes(dishId) ? '取消收藏' : '收藏'}</button>
                </div>
                
                <h3>评论</h3>
                <div class="comments">
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-user">张三</span>
                            <span class="comment-date">2023-10-15</span>
                        </div>
                        <div class="comment-rating">★★★★☆</div>
                        <p>味道不错，价格合理，推荐尝试！</p>
                    </div>
                    <div class="comment">
                        <div class="comment-header">
                            <span class="comment-user">李四</span>
                            <span class="comment-date">2023-10-12</span>
                        </div>
                        <div class="comment-rating">★★★☆☆</div>
                        <p>一般般，没有想象中的好吃。</p>
                    </div>
                </div>
                
                <h3 style="margin-top: 20px;">发表评论</h3>
                <form id="comment-form">
                    <div class="form-group">
                        <label for="comment-rating">评分</label>
                        <select id="comment-rating">
                            <option value="5">★★★★★</option>
                            <option value="4">★★★★☆</option>
                            <option value="3">★★★☆☆</option>
                            <option value="2">★★☆☆☆</option>
                            <option value="1">★☆☆☆☆</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="comment-text">评论内容</label>
                        <textarea id="comment-text" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="anonymous-comment"> 匿名评论
                        </label>
                    </div>
                    <button type="submit" class="btn">提交评论</button>
                </form>
            `;
            
            showPage('dish-detail');
        }
        
        // 添加到购物车
        function addToCart(dishId) {
            const dish = dishes.find(d => d.id === dishId);
            cart.push(dish);
            alert(`已添加 ${dish.name} 到购物车`);
        }
        
        // 渲染购物车
        function renderCart() {
            const cartItems = document.getElementById('cart-items');
            cartItems.innerHTML = '';
            
            if (cart.length === 0) {
                cartItems.innerHTML = '<p>购物车为空</p>';
                document.getElementById('cart-total-price').textContent = '0.00';
                return;
            }
            
            let totalPrice = 0;
            
            cart.forEach((item, index) => {
                totalPrice += item.price;
                
                const cartItem = document.createElement('div');
                cartItem.className = 'cart-item';
                cartItem.innerHTML = `
                    <div>
                        <h4>${item.name}</h4>
                        <p>${item.description}</p>
                    </div>
                    <div>
                        <span>￥${item.price.toFixed(2)}</span>
                        <button class="btn" onclick="removeFromCart(${index})" style="margin-left: 10px;">删除</button>
                    </div>
                `;
                cartItems.appendChild(cartItem);
            });
            
            document.getElementById('cart-total-price').textContent = totalPrice.toFixed(2);
        }
        
        // 从购物车移除
        function removeFromCart(index) {
            cart.splice(index, 1);
            renderCart();
        }
        
        // 切换收藏状态
        function toggleFavorite(dishId) {
            const index = favorites.indexOf(dishId);
            const dish = dishes.find(d => d.id === dishId);
            
            if (index === -1) {
                favorites.push(dishId);
                dish.favorites++;
                alert(`已收藏 ${dish.name}`);
            } else {
                favorites.splice(index, 1);
                dish.favorites--;
                alert(`已取消收藏 ${dish.name}`);
            }
            
            // 如果当前在菜品详情页，更新显示
            if (document.getElementById('dish-detail-page').classList.contains('active')) {
                showDishDetail(dishId);
            }
        }
        
        // 渲染个人中心
        function renderProfile() {
            document.getElementById('profile-nickname').value = currentUser.nickname;
            
            const favoriteDishesContainer = document.getElementById('favorite-dishes');
            favoriteDishesContainer.innerHTML = '';
            
            if (favorites.length === 0) {
                favoriteDishesContainer.innerHTML = '<p>暂无收藏</p>';
                return;
            }
            
            favorites.forEach(dishId => {
                const dish = dishes.find(d => d.id === dishId);
                const dishElement = document.createElement('div');
                dishElement.className = 'dish-card';
                dishElement.innerHTML = `
                    <img src="${dish.image}" alt="${dish.name}">
                    <div class="dish-card-content">
                        <h3>${dish.name}</h3>
                        <p>${dish.description}</p>
                        <div class="dish-price">￥${dish.price.toFixed(2)}</div>
                        <button class="btn" onclick="showDishDetail(${dish.id})">查看详情</button>
                    </div>
                `;
                favoriteDishesContainer.appendChild(dishElement);
            });
        }
        
        // 更新个人资料
        function updateProfile() {
            const newNickname = document.getElementById('profile-nickname').value;
            
            if (!newNickname) {
                alert('昵称不能为空');
                return;
            }
            
            currentUser.nickname = newNickname;
            alert('昵称更新成功');
        }
        
        // 修改密码
        function changePassword() {
            const oldPassword = document.getElementById('old-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmNewPassword = document.getElementById('confirm-new-password').value;
            
            if (!oldPassword || !newPassword || !confirmNewPassword) {
                alert('请填写所有密码字段');
                return;
            }
            
            if (oldPassword !== currentUser.password) {
                alert('原密码不正确');
                return;
            }
            
            if (newPassword !== confirmNewPassword) {
                alert('新密码与确认密码不一致');
                return;
            }
            
            currentUser.password = newPassword;
            alert('密码修改成功');
            
            // 清空密码字段
            document.getElementById('old-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-new-password').value = '';
        }
        
        // 用户注册
        document.getElementById('user-register-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const nickname = document.getElementById('nickname').value;
            const password = document.getElementById('register-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!nickname || !password || !confirmPassword) {
                alert('请填写所有字段');
                return;
            }
            
            if (password !== confirmPassword) {
                alert('密码与确认密码不一致');
                return;
            }
            
            // 在实际应用中，这里应该调用后端API注册用户
            // 模拟注册成功
            const userId = '00000001'; // 实际应用中应从后端获取递增的用户ID
            document.getElementById('user-number').textContent = userId;
            showPage('register-success');
        });
        
        // 用户登录
        document.getElementById('user-login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const userId = document.getElementById('user-id').value;
            const password = document.getElementById('user-password').value;
            
            // 在实际应用中，这里应该调用后端API验证用户
            // 模拟登录成功
            currentUser = {
                id: userId,
                nickname: '示例用户',
                password: password,
                isAdmin: false
            };
            
            showPage('home');
        });
        
        // 管理员登录
        document.getElementById('admin-login-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const adminId = document.getElementById('admin-id').value;
            const password = document.getElementById('admin-password').value;
            
            // 在实际应用中，这里应该调用后端API验证管理员
            if (password === 'zjuzju') {
                currentUser = {
                    id: adminId,
                    nickname: '管理员',
                    password: password,
                    isAdmin: true
                };
                
                showPage('admin');
            } else {
                alert('密码错误');
            }
        });
        
        // 退出登录
        function logout() {
            currentUser = null;
            cart = [];
            favorites = [];
            showPage('login');
        }
        
        // 切换语言
        function changeLanguage(lang) {
            currentLanguage = lang;
            // 在实际应用中，这里应该更新所有文本内容
            alert('语言已切换为: ' + (lang === 'zh-CN' ? '简体中文' : 'English'));
        }
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 默认显示登录页面
            showPage('login');
        });
    </script>
</body>
</html>